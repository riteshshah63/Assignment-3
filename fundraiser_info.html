<!DOCTYPE html>
<html>
<head>
    <title>info</title>
    <style>
        /*CSS for styling all parts of the html*/
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #ffffff;
        }

        .navbar {
            background-color: #4a90e2;
            overflow: hidden;
            max-width: 1000px;
            margin: 0 auto;
        }

        .navbar a {
            float: left;
            display: block;
            color: #f2f2f2;
            text-align: center;
            padding: 14px 16px;
            text-decoration: none;
        }

        .navbar a:hover {
            background-color: #ddd;
            color: black;
        }

        .search-container {
            float: right;
            padding: 14px 16px;
        }

        .content {
            text-align: center;
            padding: 16px;
            margin: 0 auto;
            max-width: 1000px;
            background-color: #ffffff;
        }

        .content2 {
            padding: 16px;
            margin: 0 auto;
            max-width: 1000px;
            background-color: #ffffff;
        }

    </style>
</head>

<body>

    <div class="navbar">
        <a href="/">Home</a>
        <a href="/search">Search</a>
        <a href="/donation">Donation</a>
        <div class="search-container">
            <form action="/search">
                <input type="text" placeholder="Search Fundraisers....">
                <button>Search</button>
            </form>
        </div>
    </div>

    <div class="content">
        <h1>FUNDRAISERS'R'US</h1>
    </div>
    <div class="content2">
        <h2>fundraising Info.</h2>
    </div>

    <div id="homepagedata" class="content2">

    </div>

    <script>
        // getting id number from the URL
        const url = window.location.href;  //reference for method https://ui.dev/get-current-url-javascript
        const fundraiserId = url.split('id=')[1];

        // get the specific fundraiser data using fetch and the ID retrieved above
        if (fundraiserId) {
            fetch(`http://localhost:3060/api/fundraisers/${fundraiserId}`)
                .then(response => response.json())
                .then(data => {
                    const homepagedatadiv = document.getElementById('homepagedata');
                    // Clear previous content
                    homepagedatadiv.innerHTML = ""; 
                    // data is being retrieved in an array from the database this if statment allows the script to handle the array
                    if (Array.isArray(data) && data.length > 0) {
                        // Access the first item
                        const fundraiser = data[0];
                        //displaying data using inner html similair to unit content 
                        homepagedatadiv.innerHTML = 
                            `<p>Fundraiser Title: ${fundraiser.CAPTION}</p>
                            <p>Organizer: ${fundraiser.ORGANIZER}</p>
                            <p>Target Funding: ${fundraiser.TARGET_FUNDING}</p>
                            <p>Current Funding: ${fundraiser.CURRENT_FUNDING}</p>
                            <p>City: ${fundraiser.CITY}</p>`
                            ;
                    } else {
                        homepagedatadiv.textContent = "No fundraiser found!";
                    }
                })
                .catch(error => {
                    console.error("Error fetching fundraiser data:", error);
                    document.getElementById('homepagedata').textContent = "Error loading fundraiser data.";
                });
        }
    </script>

</body>
</html>